apps:
  - name: personal_bootstrap
    script: bash
    args: bootstrap.sh
    cwd: deployment/personal
    env:
      PGPASSWORD: mypassword
    autorestart: false

  - name: personal_sensor_cron
    script: src/sensor.js
    cwd: components/sensor-cron
    instances: 1
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G

  - name: personal_ruleengine
    script: src/ruleengine.js
    cwd: components/ruleengine-vm2
    instances: 2
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G

  - name: personal_agent_telegram
    script: npm start --silent
    cwd: components/telegram
    instances: 1
    autorestart: true
    restart_delay: 10000
    watch:
      - .
    max_memory_restart: 1G

  - name: personal_api
    script: src/api.js
    cwd: components/core
    env:
      PG_CONNECTION_STRING: postgres://ifttt:mypassword@localhost/personal
      NODE_ENV: staging
    instances: 2
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G
